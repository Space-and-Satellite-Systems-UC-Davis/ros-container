{
  "name": "ROS 2 ${templateOption:rosDistro} + Nav2",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "ROS_DISTRO": "${templateOption:rosDistro}"
    }
  },
  "initializeCommand": "bash -lc 'if [ ! -f .devcontainer/.env ]; then cp .devcontainer/.env.example .devcontainer/.env; fi'",
  "remoteEnv": {
    "ROS_DISTRO": "${templateOption:rosDistro}",
    "DISPLAY": ":1",
    "VNC_PASSWORD": "${localEnv:VNC_PASSWORD}"
  },
  "runArgs": [
    "--env-file=${localWorkspaceFolder}/.devcontainer/.env"
  ],
  "forwardPorts": [
    6080,
    5901
  ],
  "portsAttributes": {
    "6080": {
      "label": "noVNC",
      "onAutoForward": "notify"
    }
  },
  "mounts": [
    "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-iot.vscode-ros",
        "ms-python.python"
      ]
    }
  },
  "workspaceFolder": "/workspace",
  "postStartCommand": "start-vnc.sh"
}
